<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Product CRUD</title>
</head>
<body>
<h2>Product Management</h2>

<form th:object="${item}" method="post">
    <input th:field="*{id}" placeholder="Id?" readonly>
    <input th:field="*{name}" placeholder="Name?">
    <input th:field="*{image}" placeholder="Image?">
    <input th:field="*{price}" placeholder="Price?" type="number" step="0.01">
    <input th:field="*{createdate}" >
    <input th:field="*{available}" type="checkbox"> Available
    <select th:field="*{category.id}">
        <option value="">-- Choose a Category --</option>
        <option th:each="cat : ${categories}"
                th:value="${cat.id}"
                th:text="${cat.name}">
        </option>
    </select>
    <hr>
    <button type="submit" formaction="/product/create"
            onclick="document.querySelector('[name=id]').value=''">Create</button>
    <button type="submit" formaction="/product/update">Update</button>
</form>

<hr>

<table border="1" style="width:100%">
    <tr>
        <th>Id</th>
        <th>Name</th>
        <th>Image</th>
        <th>Price</th>
        <th>CreateDate</th>
        <th>Available</th>
        <th>CategoryId</th>
        <th>Action</th>
    </tr>
    <tr th:each="p : ${items}">
        <td th:text="${p.id}"></td>
        <td th:text="${p.name}"></td>
        <td th:text="${p.image}"></td>
        <td th:text="${p.price}"></td>
        <td th:text="${#dates.format(p.createdate, 'yyyy-MM-dd')}"></td>
        <td th:text="${p.available}"></td>
        <td th:text="${p.category.name}"></td>
        <td>
            <a th:href="@{|/product/edit/${p.id}|}">Edit</a> |
            <a th:href="@{|/product/delete/${p.id}|}"
               onclick="return confirm('Delete this product?')">Delete</a>
        </td>
    </tr>
</table>
</body>
</html>
